#1.Fill your public key inside the tfvars file /environments/bootcamp/terraform.tfvars in case you need to ssh inside the virtual machine.

#2.Create storage account to store the tfstate by using az cli (this will be performed for a single time).
./create_storage_account.sh <FILL_WITH_A_UNIQ_NAME> westeurope Standard_LRS tfstate bootcamp-terraform westeurope
#2.1. Replace in site.tf the FILL_WITH_THE_UNIQ_STORAGE_NAME under terraform {
  backend "azurerm" {
    resource_group_name  = "bootcamp-terraform"
    storage_account_name = "FILL_WITH_THE_UNIQ_STORAGE_NAME"
    container_name       = "tfstate"
    key                  = "bootcampdev.tfstate"
  }
}

#3. Give a uniq name for the storage account in /modules/vm/main.tf
resource "azurerm_storage_account" "bootcampstg" {
  name                     = "${var.prefix}stg639"
#3.1 Replace the uniq name also for the follwing URL:
"fileUris": ["https://bootcampstg639.blob.core.windows.net/bootcampstgcon/bootcamp-installnginx.sh"],

#4.Terraform steps to run to provision the infrastructure.
chmod +x deploy.sh; ./deploy.sh
#4.1.To test, get the public ip of the vm and check if the main nginx page is available.

#5.Terraform step to run to destroy the infrastructure.
chmod +x destroy.sh; ./destroy.sh
